"use strict";(()=>{var Pe=Object.defineProperty;var _e=(t,e)=>{for(var r in e)Pe(t,r,{get:e[r],enumerable:!0})};var o=(t,e)=>{if(!t)throw new Error(e??"Failed assertion.")},ae=t=>{throw new Error(t??"Reached unimplemented code.")},y=t=>{throw new Error(t??"Reached unreachable code.")};var U={};_e(U,{base64:()=>de,hex:()=>N,json:()=>F,toml:()=>me,utf8:()=>H,yaml:()=>ye});var ie=async t=>{try{return await syscall("build",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},se=async t=>{try{return await syscall("bundle",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}};var oe=async(t,e)=>{try{return await syscall("decompress",t,e)}catch(r){throw new Error("The syscall failed.",{cause:r})}},le=async(t,e)=>{try{return await syscall("download",t,e)}catch(r){throw new Error("The syscall failed.",{cause:r})}},m={base64:{decode:t=>{try{return syscall("encoding_base64_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_base64_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}},hex:{decode:t=>{try{return syscall("encoding_hex_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_hex_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}},json:{decode:t=>{try{return syscall("encoding_json_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_json_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}},toml:{decode:t=>{try{return syscall("encoding_toml_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_toml_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}},utf8:{decode:t=>{try{return syscall("encoding_utf8_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_utf8_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}},yaml:{decode:t=>{try{return syscall("encoding_yaml_decode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}},encode:t=>{try{return syscall("encoding_yaml_encode",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}}}},ce=async(t,e)=>{try{return await syscall("extract",t,e)}catch(r){throw new Error("The syscall failed.",{cause:r})}},ue=t=>{try{return syscall("log",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}};var J=async t=>{try{return await syscall("read",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}};var pe=async t=>{try{return await syscall("sleep",t)}catch(e){throw new Error("The syscall failed.",{cause:e})}};var de;(r=>(r.decode=n=>m.base64.decode(n),r.encode=n=>m.base64.encode(n)))(de||={});var N;(r=>(r.decode=n=>m.hex.decode(n),r.encode=n=>m.hex.encode(n)))(N||={});var F;(r=>(r.decode=n=>m.json.decode(n),r.encode=n=>m.json.encode(n)))(F||={});var me;(r=>(r.decode=n=>m.toml.decode(n),r.encode=n=>m.toml.encode(n)))(me||={});var H;(r=>(r.decode=n=>m.utf8.decode(n),r.encode=n=>m.utf8.encode(n)))(H||={});var ye;(r=>(r.decode=n=>m.yaml.decode(n),r.encode=n=>m.yaml.encode(n)))(ye||={});var p;(e=>{class t{#e;constructor(n){this.#e=n}get state(){return this.#e}static withId(n){return new t({id:n,object:void 0})}static withObject(n){return new t({id:void 0,object:n})}expectId(){if(this.#e.id===void 0)throw new Error;return this.#e.id}expectObject(){if(this.#e.object===void 0)throw new Error;return this.#e.object}async id(){return await this.store(),this.#e.id}async object(){return await this.load(),this.#e.object}async load(){this.#e.object===void 0&&(this.#e.object=await syscall("load",this.#e.id))}async store(){this.#e.id===void 0&&(this.#e.id=await syscall("store",this.#e.object))}}e.Handle=t})(p||={});var $=async(...t)=>await x.new(...t),x=class t{#e;constructor(e){this.#e=e}static withId(e){return new t(p.Handle.withId(e))}static async new(...e){let{contents:r,executable:n,references:a}=await T(e,async c=>c===void 0?{}:typeof c=="string"||c instanceof Uint8Array||c instanceof b?{contents:await u({kind:"array_append",value:[c]})}:t.is(c)?{contents:await u({kind:"array_append",value:[await c.contents()]}),executable:await u({kind:"array_append",value:[await c.executable()]}),references:await u({kind:"array_append",value:[await c.references()]})}:typeof c=="object"?{contents:await u({kind:"array_append",value:[c.contents]}),executable:await u({kind:"array_append",value:[c.executable]}),references:await u({kind:"array_append",value:[c.references]})}:y()),s=await z(r),i=(n??[]).some(c=>c),l=a??[];return new t(p.Handle.withObject({kind:"file",value:{contents:s,executable:i,references:l}}))}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="file"),e.value}get handle(){return this.#e}async contents(){return(await this.object()).contents}async executable(){return(await this.object()).executable}async references(){return(await this.object()).references}async size(){return(await this.contents()).size()}async bytes(){return(await this.contents()).bytes()}async text(){return(await this.contents()).text()}};var k=class t{#e;constructor(e){this.#e=e}static withId(e){return new t(p.Handle.withId(e))}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="package"),e.value}get handle(){return this.#e}async artifact(){return(await this.object()).artifact}async dependencies(){return(await this.object()).dependencies}};var C=(...t)=>E.new(...t),S=(...t)=>V.new(...t),E=class t{#e;#t;constructor(e){this.#e=e?.parents??0,this.#t=e?.subpath??new V}static new(...e){return e.reduce(function r(n,a){if(typeof a=="string")for(let s of a.split("/"))s===""||s==="."||(s===".."?n=n.parent():n.#t.push(s));else if(a instanceof t){for(let s=0;s<a.#e;s++)n.parent();n.#t.join(a.#t)}else if(a instanceof V)n.#t.join(a);else if(a instanceof Array)a.forEach(s=>r(n,s));else return y();return n},new t)}isEmpty(){return this.#e==0&&this.#t.isEmpty()}parents(){return this.#e}subpath(){return this.#t}parent(){return this.#t.isEmpty()?this.#e+=1:this.#t.pop(),this}join(e){e=t.new(e);for(let r=0;r<e.#e;r++)this.parent();return this.#t.join(e.#t),this}extension(){return this.#t.extension()}toSubpath(){if(this.#e>0)throw new Error("Cannot convert to subpath.");return this.#t}toString(){let e="";for(let r=0;r<this.#e;r++)e+="../";return e+=this.#t.toString(),e}};(e=>{let t;(s=>(s.is=i=>V.Arg.is(i)||i instanceof e||i instanceof Array&&i.every(e.Arg.is),s.expect=i=>(o((0,s.is)(i)),i),s.assert=i=>{o((0,s.is)(i))}))(t=e.Arg||={})})(E||={});var V=class{#e;constructor(e){this.#e=e??[]}static new(...e){return E.new(...e).toSubpath()}components(){return[...this.#e]}isEmpty(){return this.#e.length==0}join(e){return this.#e.push(...e.#e),this}push(e){this.#e.push(e)}pop(){this.#e.pop()}extension(){return this.#e.at(-1)?.split(".").at(-1)}toRelpath(){return E.new(this)}toString(){return this.#e.join("/")}};(e=>{let t;(s=>(s.is=i=>i===void 0||typeof i=="string"||i instanceof e||i instanceof Array&&i.every(e.Arg.is),s.expect=i=>(o((0,s.is)(i)),i),s.assert=i=>{o((0,s.is)(i))}))(t=e.Arg||={})})(V||={});var h=(...t)=>d.new(...t),d=class t{#e;constructor(e){this.#e=e}static async new(...e){let{components:r}=await T(e,async n=>n===void 0?{}:typeof n=="string"||w.is(n)?{components:await u({kind:"array_append",value:[n]})}:t.is(n)?{components:await u({kind:"array_append",value:n.components})}:y());return r=(r??[]).reduce((n,a)=>{let s=n.at(-1);return a===""||(typeof s=="string"&&typeof a=="string"?n.splice(-1,1,s+a):n.push(a)),n},[]),new t(r)}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}static async join(e,...r){let n=await h(e),a=await Promise.all(r.map(i=>h(i)));a=a.filter(i=>i.components.length>0);let s=[];for(let i=0;i<a.length;i++){i>0&&s.push(n);let l=a[i];o(l),s.push(l)}return h(...s)}get components(){return this.#e}};var Q=async(...t)=>await A.new(...t),A=class t{#e;constructor(e){this.#e=e}static withId(e){return new t(p.Handle.withId(e))}static async new(...e){let{artifact:r,path:n}=await T(e,async i=>{if(i===void 0)return{};if(typeof i=="string")return{path:await u({kind:"template_append",value:i})};if(w.is(i))return{artifact:i,path:await u({kind:"unset"})};if(d.is(i)){o(i.components.length<=2);let[l,c]=i.components;if(typeof l=="string"&&c===void 0)return{path:await u({kind:"template_append",value:l})};if(w.is(l)&&c===void 0)return{artifact:l,path:await u({kind:"unset"})};if(w.is(l)&&typeof c=="string")return o(c.startsWith("/")),{artifact:l,path:c.slice(1)};throw new Error("Invalid template.")}else return t.is(i)?{artifact:await i.artifact(),path:(await i.path()).toString()}:d.is(i)?{path:await u({kind:"template_append",value:i})}:typeof i=="object"?i:y()}),a=C(n??""),s;if(r!==void 0&&!a.isEmpty())s=await h(r,"/",a.toString());else if(r!==void 0)s=await h(r);else if(!a.isEmpty())s=await h(a.toString());else throw new Error("Invalid symlink.");return new t(p.Handle.withObject({kind:"symlink",value:{target:s}}))}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="symlink"),e.value}get handle(){return this.#e}async target(){return(await this.object()).target}async artifact(){let r=(await this.target()).components.at(0);if(w.is(r))return r}async path(){let e=await this.target(),[r,n]=e.components;if(typeof r=="string"&&n===void 0)return C(r);if(w.is(r)&&n===void 0)return C();if(w.is(r)&&typeof n=="string")return C(n.slice(1));throw new Error("Invalid template.")}async resolve(e){e=e?await Q(e):void 0;let r=await e?.artifact();t.is(r)&&(r=await r.resolve());let n=e?.path(),a=await this.artifact();t.is(a)&&(a=await a.resolve());let s=await this.path();if(a!==void 0&&s.isEmpty())return a;if(a===void 0&&!s.isEmpty()){if(!f.is(r))throw new Error("Expected a directory.");return await r.tryGet((await(n??C())).parent().join(s).toSubpath().toString())}else if(a!==void 0&&!s.isEmpty()){if(!f.is(a))throw new Error("Expected a directory.");return await a.tryGet(s.toSubpath().toString())}else throw new Error("Invalid symlink.")}};var I;(r=>(r.toUrl=n=>`tangram://${m.hex.encode(m.utf8.encode(m.json.encode(n)))}/${n.value.path}`,r.fromUrl=n=>{let a=n.match(/^tangram:\/\/([0-9a-f]+)/);o(a);let[s,i]=a;return o(i!==void 0),m.json.decode(m.utf8.decode(m.hex.decode(i)))}))(I||={});var fe,X=()=>fe,ge=t=>{fe=t},L={};function Y(...t){if(t.length===1&&typeof t[0]=="object"&&"function"in t[0]){let e=t[0],{url:r,name:n}=e,a=F.encode({url:r,name:n});o(L[a]===void 0),L[a]=e.function;let s=I.fromUrl(e.url);o(s.kind==="normal");let i=k.withId(s.value.packageId);return new j(p.Handle.withObject({kind:"target",value:{host:"js-js",executable:new d([s.value.path]),package:i,name:e.name,args:[],env:{},checksum:void 0,unsafe:!1}}))}else return j.new(...t)}var he=async(...t)=>await(await Y(...t)).build(),j=class t extends globalThis.Function{#e;constructor(e){super(),this.#e=e;let r=this;return new Proxy(r,{get(n,a,s){return typeof r[a]=="function"?r[a].bind(r):r[a]},apply:async(n,a,s)=>await(await t.new(r,{args:await _(s)})).build(),getPrototypeOf:n=>Object.getPrototypeOf(r)})}static withId(e){return new t(p.Handle.withId(e))}static async new(...e){let{host:r,executable:n,package:a,name:s,env:i,args:l,checksum:c,unsafe:P}=await T(e,async g=>typeof g=="string"||w.is(g)||g instanceof d?{host:(await X().env()).TANGRAM_HOST,executable:"/bin/sh",args:["-c",g]}:t.is(g)?await g.object():typeof g=="object"?{...g,env:await u({kind:"array_append",value:[g.env]}),args:await u({kind:"array_append",value:[g.args]})}:y());if(!r)throw new Error("Cannot create a target without a host.");if(!n)throw new Error("Cannot create a target without an executable.");let R=await h(n),v=await T(M(i??[]),async g=>g);return l??=[],P??=!1,new t(p.Handle.withObject({kind:"target",value:{host:r,executable:R,package:a,name:s,env:v,args:l,checksum:c,unsafe:P}}))}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="target"),e.value}get handle(){return this.#e}async host(){return(await this.object()).host}async executable(){return(await this.object()).executable}async package(){return(await this.object()).package}async name_(){return(await this.object()).name}async env(){return(await this.object()).env}async args(){return(await this.object()).args}async checksum(){return(await this.object()).checksum}async unsafe(){return(await this.object()).unsafe}async build(...e){return await ie(await t.new(this,{args:e}))}};var _=async t=>{if(t=await t,t===void 0||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Uint8Array||t instanceof b||t instanceof f||t instanceof x||t instanceof A||t instanceof d||t instanceof O||t instanceof k||t instanceof j)return t;if(t instanceof Array)return await Promise.all(t.map(e=>_(e)));if(typeof t=="object")return Object.fromEntries(await Promise.all(Object.entries(t).map(async([e,r])=>[e,await _(r)])));throw new Error("Invalid value to resolve.")};var T=async(t,e)=>M(await Promise.all(M(await Promise.all(t.map(_))).map(r=>e(r)))).reduce(async(r,n)=>{for(let[a,s]of Object.entries(n))await Oe(await r,a,s);return r},Promise.resolve({}));async function u(t){return await O.new(t)}var O=class t{#e;constructor(e){this.#e=e}static async new(e){let r=await _(e);return r.kind==="array_prepend"||r.kind==="array_append"?new t({kind:r.kind,value:M(r.value)}):r.kind==="template_prepend"||r.kind==="template_append"?new t({kind:r.kind,value:await h(r.value),separator:await h(r.separator)}):r.kind==="unset"?new t({kind:"unset"}):new t({kind:r.kind,value:r.value})}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}get inner(){return this.#e}},M=t=>t instanceof Array?t.flat(1/0):[t],Oe=async(t,e,r)=>{if(!(r instanceof O))t[e]=r;else if(r.inner.kind==="unset")delete t[e];else if(r.inner.kind==="set")t[e]=r.inner.value;else if(r.inner.kind==="set_if_unset")e in t||(t[e]=r.inner.value);else if(r.inner.kind==="array_prepend"){e in t||(t[e]=[]);let n=t[e];o(n instanceof Array),n.unshift(...M(r.inner.value))}else if(r.inner.kind==="array_append"){e in t||(t[e]=[]);let n=t[e];o(n instanceof Array),n.push(...M(r.inner.value))}else if(r.inner.kind==="template_prepend"){e in t||(t[e]=await h());let n=t[e];o(n===void 0||typeof n=="string"||w.is(n)||n instanceof d),t[e]=await d.join(r.inner.separator,r.inner.value,n)}else if(r.inner.kind==="template_append"){e in t||(t[e]=await h());let n=t[e];o(n===void 0||typeof n=="string"||w.is(n)||n instanceof d),t[e]=await d.join(r.inner.separator,n,r.inner.value)}};var z=async(...t)=>await b.new(...t),we=async(t,e)=>await b.download(t,e),b=class t{#e;constructor(e){this.#e=e}static withId(e){return new t(p.Handle.withId(e))}static async new(...e){let{children:r}=await T(e,async n=>{if(n===void 0)return{};if(typeof n=="string"){let a=new t(p.Handle.withObject({kind:"blob",value:H.encode(n)}));return{children:await u({kind:"array_append",value:[a]})}}else if(n instanceof Uint8Array){let a=new t(p.Handle.withObject({kind:"blob",value:n}));return{children:await u({kind:"array_append",value:[a]})}}else return t.is(n)?{children:await u({kind:"array_append",value:[n]})}:y()});return(!r||r.length===0)&&(r=[new t(p.Handle.withObject({kind:"blob",value:new Uint8Array}))]),new t(p.Handle.withObject({kind:"blob",value:await Promise.all(r.map(async n=>[n,await n.size()]))}))}static async download(e,r){return await le(e,r)}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="blob"),e.value}get handle(){return this.#e}async size(){let e=await this.object();return e instanceof Array?e.map(([r,n])=>n).reduce((r,n)=>r+n,0):e.byteLength}async bytes(){return await J(this)}async text(){return H.decode(await J(this))}async decompress(e){return await oe(this,e)}async extract(e){return await ce(this,e)}};var be=async(...t)=>await f.new(...t),f=class t{#e;constructor(e){this.#e=e}static withId(e){return new t(p.Handle.withId(e))}static async new(...e){let r=await(await Promise.all(e.map(_))).reduce(async function n(a,s){let i=await a;if(s!==void 0)if(t.is(s))for(let[l,c]of Object.entries(await s.entries())){let P=i[l];t.is(P)&&t.is(c)&&(c=await t.new(P,c)),i[l]=c}else if(s instanceof Array)for(let l of s)i=await n(Promise.resolve(i),l);else if(typeof s=="object")for(let[l,c]of Object.entries(s)){let[P,...R]=S(l).components();if(P===void 0)throw new Error("The path must have at least one component.");let v=P,g=i[v];if(t.is(g)||(g=void 0),R.length>0){let q=S(R).toString(),je=await t.new(g,{[q]:c});i[v]=je}else if(c===void 0)delete i[v];else if(typeof c=="string"||c instanceof Uint8Array||c instanceof b){let q=await $(c);i[v]=q}else x.is(c)||A.is(c)?i[v]=c:i[v]=await t.new(g,c)}else return y();return i},Promise.resolve({}));return new t(p.Handle.withObject({kind:"directory",value:{entries:r}}))}static is(e){return e instanceof t}static expect(e){return o(t.is(e)),e}static assert(e){o(t.is(e))}async id(){return await this.#e.id()}async object(){let e=await this.#e.object();return o(e.kind==="directory"),e.value}get handle(){return this.#e}async get(e){let r=await this.tryGet(e);return o(r,`Failed to get the directory entry "${e}".`),r}async tryGet(e){let r=this,n=S();for(let a of S(e).components()){if(!t.is(r))return;n.push(a);let s=(await r.entries())[a];if(s===void 0)return;if(A.is(s)){let i=await s.resolve({artifact:this,path:n.toString()});if(i===void 0)return;r=i}else r=s}return r}async entries(){let e={};for await(let[r,n]of this)e[r]=n;return e}async bundle(){return await se(this)}async*walk(){for await(let[e,r]of this)if(yield[S(e),r],t.is(r))for await(let[n,a]of r.walk())yield[S(e).join(n),a]}async*[Symbol.asyncIterator](){let e=await this.object();for(let[r,n]of Object.entries(e.entries))yield[r,n]}};var w;(n=>(n.is=a=>f.is(a)||x.is(a)||A.is(a),n.expect=a=>(o((0,n.is)(a)),a),n.assert=a=>{o((0,n.is)(a))}))(w||={});var K=class{message;location;stack;source;constructor(e,r,n,a){this.message=e,this.location=r,this.stack=n,this.source=a}},Ae=(t,e)=>({callSites:e.map(n=>({typeName:n.getTypeName(),functionName:n.getFunctionName(),methodName:n.getMethodName(),fileName:n.getFileName(),lineNumber:n.getLineNumber(),columnNumber:n.getColumnNumber(),isEval:n.isEval(),isNative:n.isNative(),isConstructor:n.isConstructor(),isAsync:n.isAsync(),isPromiseAll:n.isPromiseAll(),promiseIndex:n.getPromiseIndex()}))});var xe=async t=>{let e=I.fromUrl(t.url);o(e.kind==="normal");let n=await k.withId(e.value.packageId).artifact();f.assert(n);let a=S(e.value.path).toRelpath().parent().join(t.path).toSubpath().toString();return await n.get(a)};var Z=(...t)=>{let e=t.map(r=>ve(r)).join(" ")+`
`;ue(e)},ve=t=>G(t,new WeakSet),G=(t,e)=>{switch(typeof t){case"string":return`"${t}"`;case"number":return t.toString();case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":W(t,e);case"function":return j.is(t)?W(t,e):`(function "${t.name??"(anonymous)"}")`;case"symbol":return"(symbol)";case"bigint":return t.toString()}},W=(t,e)=>{if(e.has(t))return"(circular)";if(e.add(t),t instanceof Array)return`[${t.map(r=>G(r,e)).join(", ")}]`;if(t instanceof Uint8Array)return`(tg.bytes ${N.encode(t)})`;if(t instanceof Error)return t.message;if(t instanceof Promise)return"(promise)";if(b.is(t))return`(tg.blob ${D(t.handle,e)})`;if(f.is(t))return`(tg.directory ${D(t.handle,e)})`;if(x.is(t))return`(tg.file ${D(t.handle,e)})`;if(A.is(t))return`(tg.symlink ${D(t.handle,e)})`;if(d.is(t))return`\`${t.components.map(n=>typeof n=="string"?n:`\${${G(n,e)}}`).join("")}\``;if(O.is(t))return`(tg.mutation ${W(t.inner,e)})`;if(k.is(t))return`(tg.package ${D(t.handle,e)})`;if(j.is(t))return`(tg.target ${D(t.handle,e)})`;{let r="";t.constructor!==void 0&&t.constructor.name!=="Object"&&(r=`${t.constructor.name} `);let n=Object.entries(t).map(([s,i])=>`${s}: ${G(i,e)}`),a=n.length>0?" ":"";return`${r}{${a}${n.join(", ")}${a}}`}},D=(t,e)=>{let{id:r,object:n}=t.state;return r!==void 0?r:n!==void 0?W(n.value,e):y()};var ke=async t=>{let e=await t.package();o(e);let r=await e.id(),a=(await t.executable()).components[0];o(typeof a=="string");let s={kind:"normal",value:{packageId:r,path:a}},i=I.toUrl(s);await import(i);let l=await t.name_();if(!l)throw new Error("The target must have a name.");let c=F.encode({url:i,name:l}),P=L[c];if(!P)throw new Error("Failed to find the function.");ge(t);let R=await t.args();return await P(...R)};var Te=async t=>await pe(t);var ee=t=>{if(typeof t=="string")return t;{let{arch:e,os:r}=t;return`${e}-${r}`}},te;(i=>(i.new_=l=>ee(l),i.new=i.new_,i.is=l=>l==="aarch64-darwin"||l==="aarch64-linux"||l==="js-js"||l==="x86_64-darwin"||l==="x86_64-linux",i.expect=l=>(o(i.is(l)),l),i.assert=l=>{o(i.is(l))},i.arch=l=>{switch(l){case"aarch64-darwin":case"aarch64-linux":return"aarch64";case"js-js":return"js";case"x86_64-linux":case"x86_64-darwin":return"x86_64";default:throw new Error("Invalid system.")}},i.os=l=>{switch(l){case"aarch64-darwin":case"x86_64-darwin":return"darwin";case"js-js":return"js";case"x86_64-linux":case"aarch64-linux":return"linux";default:throw new Error("Invalid system.")}}))(te||={});var re;(n=>(n.is=a=>a===void 0||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Uint8Array||a instanceof b||a instanceof f||a instanceof x||a instanceof A||a instanceof d||a instanceof k||a instanceof j||a instanceof Array||typeof a=="object",n.expect=a=>(o((0,n.is)(a)),a),n.assert=a=>{o((0,n.is)(a))}))(re||={});Object.defineProperties(Error,{prepareStackTrace:{value:Ae}});Object.defineProperties(globalThis,{console:{value:{log:Z}}});async function ne(t,...e){let r=[];for(let n=0;n<t.length-1;n++){let a=t[n];r.push(a);let s=e[n];r.push(s)}return r.push(t[t.length-1]),await h(...r)}Object.assign(ne,{Artifact:w,Blob:b,Directory:f,Error:K,File:x,Mutation:O,Object_:p,Package:k,Symlink:A,System:te,Target:j,Template:d,Value:re,apply:T,assert:o,blob:z,build:he,directory:be,download:we,encoding:U,file:$,include:xe,log:Z,main:ke,mutation:u,resolve:_,sleep:Te,symlink:Q,system:ee,target:Y,template:h,unimplemented:ae,unreachable:y});Object.defineProperties(ne,{current:{get:X}});Object.defineProperties(globalThis,{tg:{value:ne}});})();
//# sourceMappingURL=runtime.js.map
